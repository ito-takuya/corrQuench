# Taku Ito
# 4/1/2018

import numpy as np
import glmAnalysis as ga

ga = reload(ga)

# Set up functions for main GLM-type analyses


subjNums = ['100307','103111','106016','113619','117122','122317','125525','128632','131722','136833','146432','149539','153025','161731','188347','198451','211720','245333','414229','756055','100408','103414','108828','113922','118528','122620','126325','129028','133019','138534','147737','149741','154734','162733','189450','199655','212318','280739','499566','792564','101107','103818','110411','114419','118730','123117','127630','130013','133928','139637','148335','151223','156637','163129','190031','201111','214423','298051','654754','856766','101309','105014','111312','115320','118932','123925','127933','130316','135225','140925','148840','151526','159340','176542','192540','208226','221319','366446','672756','857263','101915','105115','111716','116524','120111','124422','128127','131217','135932','144832','149337','151627','160123','178950','196750','211417','239944','397760','751348','899885'] 
#subjNums = ['130316','135225','140925','148840','151526','159340','176542','192540','208226','221319','366446','672756','857263','101915','105115','111716','116524','120111','124422','128127','131217','135932','144832','149337','151627','160123','178950','196750','211417','239944','397760','751348','899885'] 
subjNums = ['106016','214423','127933'] 


def regularGLM(gsr=True,glm='canonical',nproc=20):
    for subj in subjNums:
        print 'Running task GLM on subject', subj, '| type=', glm
        out = ga.GlasserGLM_taskdata_HCP(subj, gsr=True, nproc=nproc,glmtype=glm)

def restGLMUsingTaskRegressors(gsr=True,glm='FIR',nproc=20):
    for subj in subjNums:
        print 'Running task GLM on subject', subj, '| type=', glm
        out = ga.GlasserGLM_restdata_HCP_forTaskRestComparison(subj, gsr=True, nproc=nproc,glmtype=glm)

def debug():
    arr = []
    for subj in subjNums:
        tmp = ga.loadStimFiles_task_HCP_withFIR(subj)
        arr.append(np.sum(np.sum(tmp['taskRegressors'],axis=0)==1))
    return subjNums, arr

